<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Generator" content="Microsoft Word 97">
   <meta name="Template" content="C:\Program Files\Microsoft Office\Office\html.dot">
   <meta name="GENERATOR" content="Mozilla/4.61 [en]C-CCK-MCD   (Win98; I) [Netscape]">
   <title>What's New in ADVISOR</title>
</head>
<body link="#0000FF" vlink="#800080">

<center>
<h1>
User Definable Scaling Relationships</h1></center>
Prior to version 3.2, the secondary effects of the component scaling where
assumed to be completely linear and were embedded within the component
block diagrams and in miscellanous script files. In version 3.2, we have
introduced user definable scaling relationships within the component datafiles.
This allows users to develop and apply their own secondary scaling relationships.
The primary impacts are still assumed to be linear. For example, changing
fc_trq_scale from 1.0 to 1.1 still means that the torque capability of
the engine will increase by 10%. However, you can now define the relationship
between fc_trq_scale and engine mass. Since the change in mass due to an
increase in torque output is not necessarily directly proportional (i.e.
you could change any number of engine parameters to provide more torque
with out significantly changing the engine block and accessories) therefore
the relationship might be defined as fc_mass=fc_base_mass * 0.25 * fc_trq_scale.
You could also include non-linear relationships like fc_mass=fc_base_mass*(0.02*(fc_trq_scale)^2+0.5*fc_trq_scale)+50
which would provide a engine mass that asymptotically approaches 50 kg
as the fc_trq_scale approaches zero and increases via a second order relationship
with increasing torque capability. Since this functionality has been implemented
using inline functions, there really are no limitations as to the form
of the function other than that you include all of the terms in the equation
definition. If you need more information on using inline functions please
refer to the matlab documentation.&nbsp; There are a set of required input
parameters however you are not required to use any of them.
<p>The basic functional relationships are defined in table 1.
<br>&nbsp;
<center><table BORDER WIDTH="100%" >
<tr>
<td><b>Component</b></td>

<td><b>Required Input&nbsp;</b>
<br><b>Parameters</b></td>

<td><b>Output</b></td>

<td><b>Default Equation</b></td>
</tr>

<tr>
<td>fuel converter</td>

<td>fc_spd_scale
<br>fc_trq_scale
<br>fc_base_mass
<br>fc_acc_mass
<br>fc_fuel_mass</td>

<td>fc_mass</td>

<td>fc_mass=(fc_base_mass+fc_acc_mass)*&nbsp;
<br>(c1*fc_trq_scale+c2)*
<br>(c3*fc_spd_scale+c4)+fc_fuel_mass
<br>c1=c3=1; c2=c4=0</td>
</tr>

<tr>
<td>energy storage&nbsp;
<br>system (mass)</td>

<td>ess_module_num
<br>ess_cap_scale
<br>ess_module_mass</td>

<td>ess_mass</td>

<td>ess_mass=(ess_module_mass)*&nbsp;
<br>(c1*ess_module_num+c2)*
<br>(c3*ess_cap_scale+c4)
<br>c1=c3=1; c2=c4=0</td>
</tr>

<tr>
<td>exhaust system</td>

<td>fc_pwr_scale
<br>ex_mass</td>

<td>ex_mass</td>

<td>ex_mass=(ex_mass)* (c1*fc_pwr_scale+c2)
<br>c1=1; c2=0</td>
</tr>

<tr>
<td>motor controller</td>

<td>mc_spd_scale
<br>mc_trq_scale
<br>mc_mass</td>

<td>mc_mass</td>

<td>mc_mass=(mc_mass)*&nbsp;
<br>(c1*mc_trq_scale+c2)*
<br>(c3*mc_spd_scale+c4)
<br>c1=c3=1; c2=c4=0</td>
</tr>

<tr>
<td>generator</td>

<td>gc_spd_scale
<br>gc_trq_scale
<br>gc_mass</td>

<td>gc_mass</td>

<td>gc_mass=(gc_mass)*
<br>(c1*gc_trq_scale+c2)*
<br>(c3*gc_spd_scale+c4)
<br>c1=c3=1; c2=c4=0</td>
</tr>

<tr>
<td>transmission</td>

<td>gb_spd_scale
<br>gb_trq_scale
<br>fd_mass
<br>gb_mass</td>

<td>tx_mass</td>

<td>tx_mass=(fd_mass+gb_mass)*&nbsp;
<br>(c1*gb_trq_scale+c2)*
<br>(c3*gb_spd_scale+c4)
<br>c1=c3=1; c2=c4=0</td>
</tr>

<tr>
<td>energy storage&nbsp;
<br>system (resistance)</td>

<td>ess_module_num
<br>ess_cap_scale</td>

<td>resistance scale factor&nbsp;
<br>(i.e. scaled resistance = base resistance *&nbsp;
<br>f(ess_module_num,ess_cap_scale)</td>

<td>scale_factor=(c1*ess_module_num+c2)/
<br>(c3*ess_cap_scale+c4)
<br>c1=c3=1; c2=c4=0</td>
</tr>
</table></center>

<p>How to define your own scaling relationships
<p>To use this functionality, you must define 1) the equation and 2) the
coefficients of the equation.&nbsp; Within each component file you will
find a variable *scale_fun and *scale_coef.&nbsp; The first defines the
equation to be used and the second defines the coefficients of the equation.&nbsp;
For example in the fuel_converter file,
<p>% user definable mass scaling function
<br>fc_mass_scale_fun=inline('(x(1)*fc_trq_scale+x(2))*(x(3)*fc_spd_scale+x(4))*(fc_base_mass+fc_acc_mass)+fc_fuel_mass','x','fc_spd_scale','fc_trq_scale','fc_base_mass','fc_acc_mass','fc_fuel_mass');
<br>fc_mass_scale_coef=[1 0 1 0]; % coefficients of mass scaling function
<p>To customize this relationship you may either change the coefficient
values or modify the relationship itself.&nbsp; To change the relationship,
redefine the first string in the fc_mass_scale_fun definition.&nbsp; <b>DO
NOT CHANGE</b> any other portion of this definition.&nbsp; Your customized
relationship <b>MUST NOT USE</b> variables other than those listed in the
rest of the inline function definition.
<p>The easiest way to develop your own relatioship is to create a fit to
empirical data.&nbsp; For example if we plot the module mass vs. ah capacity
for the four NiMH battery modules in our library manufactured by Ovonic,
Inc. we result in a relationship of the following form:
<p>ess_mass = ess_mass * (c1 * ess_cap_scale + c2)
<br>where c1=>>> and c2=>>>.
<p>You should use caution in applying user definable scaling relationships.&nbsp;
Be aware that the relationships are only valid within the range of data
that was used to develop the fit and should be developed based on similar
technology type (e.g. all Li-ion, all SI, all CI,- not a mixture of CI
and SI).
<br>&nbsp;
<p>
<hr>
<center>
<p><a href="advisor_doc.htm">Return to ADVISOR Documentation</a></center>

<p>
<hr>
<p>Last revised: [8/19/01] tm
</body>
</html>
