<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="Author" content="Matt Cuddy">
   <meta name="GENERATOR" content="Mozilla/4.5 [en] (WinNT; I) [Netscape]">
   <title>Series Control Strategy</title>
</head>
<body>

<h3>
<b><font size=+1>Series Control Strategy</font></b></h3>
<b><u>Role of subsystem in vehicle</u></b>
<br>The control strategy determines at what torque and speed the engine
should operate, to generate electric power via the generator, given the
conditions of the motor, ESS pack, and/or the engine/fuel converter itself.&nbsp;
Usually such a strategy is designed to minimize fuel use or emissions or
maximize ESS pack life.
<p><b><u>Description of modeling approach</u></b>
<br>The built-in series controls strategy offers flexibility in the fuel
converter (FC) operation:
<ul>
<li>
<font color="#000000">The FC may be turned off if the ESS pack SOC gets
too high.</font></li>

<li>
<font color="#000000">The FC may be turned on again if the power required
by the bus gets high enough.</font></li>

<li>
<font color="#000000">The FC may be turned on again if the SOC gets too
low.</font></li>
</ul>
<font color="#000000">When the FC is on, its power output tends to follow
the power required by the bus, accounting for losses in the generator so
that the generator power output matches the bus power requirement.&nbsp;
However,</font>
<ul>
<li>
<font color="#000000">The FC output power may be adjusted by SOC, tending
to bring the SOC back to the center of its operating range.</font></li>

<li>
<font color="#000000">The FC output power may be kept above some minimum
value.</font></li>

<li>
<font color="#000000">The FC output power may be kept below some maximum
value (which is enforced unless the SOC gets too low).</font></li>

<li>
<font color="#000000">The FC output power may be allowed to change no faster
than a prescribed rate.</font></li>
</ul>
<b><u>Variables used in subsystem</u></b>
<br>There are eleven variables that determine the control strategy.&nbsp;
Their influence on the engine operation are shown in the schematics below,
and they are described in the following table.
<p><i>Determining FC State (on/off)</i>
<center><img SRC="seriesfo.gif" height=377 width=472></center>

<p>The above figure indicates the commanded fuel converter (FC) state as
a function of ESS pack SOC, SOC-corrected fuel converter power required,
and the FC's previous state.
<p>SOC-corrected fuel converter power required is computed by:
<ol>
<li>
estimating the FC output power required to make the generator output as
much electrical power as is required by the bus for propulsion and accessory
loads, and</li>

<li>
adding an SOC-dependent correction factor, cs_charge_pwr*fc_spd_scale*fc_trq_scale*((cs_hi_soc+cs_lo_soc)/2-SOC),
that tends to bring the SOC to the middle of the range delimited by cs_hi_soc
and cs_lo_soc.</li>
</ol>
The asterisked boundary, which refers to the minimum power requirement
to cause the FC to turn on when it was previously off,&nbsp; has more dimensions
than could be included in this graphic.
<p>In fact, if the FC was last on and SOC &lt; cs_hi_soc, the engine will
stay on regardless of power command.&nbsp; It may be useful to imagine
that the yellow portion of the figure continues right of its current position,
filling the space SOC > cs_lo_soc and (power command) > (1.2*cs_min_pwr*fc_trq_scale*fc_spd_scale).
<p>However, if the FC was previously off, and (the average of the last
5 s of fuel converter power command) > (1.2*cs_min_pwr*fc_trq_scale*fc_spd_scale),
AND (the time since the FC was last on) > cs_min_off_time, the FC will
start.&nbsp; This temporal component of the logic isn't displayed in the
figure above.
<p>Finally, regardless of all other conditions, if the power required by
the bus is greater than the ESS pack capability, the FC will turn/stay
on.
<br>&nbsp;
<p><i>Determining FC Output Power</i>
<br>FC output power is as required by the generator to fulfill the bus
requirement, with the following exceptions:
<ol>
<li>
If the required SOC-corrected FC power is less than cs_min_pwr*fc_trq_scale*fc_spd_scale,
the FC power is commanded to this minimum threshold.</li>

<li>
If the required SOC-corrected FC power is greater than cs_max_pwr*fc_trq_scale*fc_spd_scale
AND the ESS pack SOC is greater than cs_lo_soc AND the power required by
the bus (unadjusted by SOC or other factors) is less than the ESS pack
capability , the FC power is commanded to this maximum threshold.</li>

<li>
The FC power command will increase no faster than cs_max_pwr_rise rate
and decrease no faster than cs_max_pwr_fall_rate (which is a number &lt;
0).</li>
</ol>
<i>Determining FC Torque and Speed</i>
<br>The current version of the control strategy is designed for heat engines
characterized by torque and speed.<font size=-2><sup>1</sup>&nbsp; </font>In
a control script executed before the simulation is run, the locus of highest
efficiency torque/speed points is computed over the range of genset (the
combination of the engine and mated generator) powers.&nbsp; The control
strategy keeps the FC torque and speed on this locus using a lookup table
defined by cs_pwr and cs_spd.
<p><a href="cs_tips.htm#Series">Control Strategy Tips</a>
<br>&nbsp;
<center><table BORDER WIDTH="80%" >
<caption><b>Series Control Strategy Variables</b></caption>

<tr BGCOLOR="#FFFFCC">
<td><b>Variable</b></td>

<td><b>Units</b></td>

<td><b>Description</b></td>
</tr>

<tr>
<td>cs_hi_soc</td>

<td>--</td>

<td>highest desired battery state of charge</td>
</tr>

<tr>
<td>cs_lo_soc</td>

<td>--</td>

<td>lowest desired battery state of charge</td>
</tr>

<tr>
<td>cs_charge_pwr</td>

<td>W</td>

<td>cs_charge_pwr*fc_spd_scale*fc_trq_scale*((cs_soc_hi+ cs_soc_lo)/2-SOC)
is the SOC-stabilizing adjustment made to the bus power requirement</td>
</tr>

<tr>
<td>cs_fc_init_state</td>

<td>--</td>

<td>&nbsp;1=>fuel converter (FC) is initially on; 0=>FC initially off</td>
</tr>

<tr>
<td>cs_max_pwr</td>

<td>W</td>

<td>cs_max_pwr*fc_spd_scale*fc_trq_scale is the maximum power commanded
of the fuel converter unless SOC&lt;cs_lo_soc</td>
</tr>

<tr>
<td>cs_min_pwr</td>

<td>W</td>

<td>cs_min_pwr*fc_spd_scale*fc_trq_scale is the minimum power commanded
of the fuel converter</td>
</tr>

<tr>
<td>cs_max_pwr_fall_rate</td>

<td>W/s</td>

<td>cs_max_pwr_fall_rate*fc_spd_scale*fc_trq_scale is the fastest the fuel
converter power command can decrease (this number &lt; 0)</td>
</tr>

<tr>
<td>cs_max_pwr_rise_rate</td>

<td>W/s</td>

<td>cs_max_pw_rise_rate*fc_spd_scale*fc_trq_scale is the fastest the fuel
converter power command can increase</td>
</tr>

<tr>
<td>cs_min_off_time</td>

<td>s</td>

<td>the shortest allowed duration of a FC-off period; after this time has
passed, the FC may restart if high enough powers are required by the bus</td>
</tr>

<tr>
<td>cs_pwr</td>

<td>W</td>

<td>cs_pwr*fc_spd_scale*fc_trq_scale is the vector of FC powers that define
the locus of best efficiency points throughout the genset map</td>
</tr>

<tr>
<td>cs_spd</td>

<td>rad/s</td>

<td>cs_spd*fc_spd_scale is the vector of FC speeds in locus of best efficiency
points, indexed by cs_pwr*fc_spd_scale*fc_trq_scale</td>
</tr>
</table></center>
<u>Example:</u>
<br><i>Pure Thermostat as a Special Case of the General Control Strategy</i>
<br>To implement a pure thermostat control strategy, use something like
the following values of the control strategy parameters:
<br>cs_hi_soc=0.8;&nbsp; <font color="#00CC00">% FC shuts off at 80% SOC</font>
<br>cs_lo_soc=0.4;&nbsp; <font color="#00CC00">% FC turns on at 40% SOC</font>
<br>cs_fc_init_state=0;&nbsp; <font color="#00CC00">% FC initially off</font>
<br>cs_min_pwr=max(fc_max_trq.*fc_map_spd)*.5;&nbsp; <font color="#00CC00">%
FC operates at no less than 50% max power when on</font>
<br>cs_max_pwr=max(fc_max_trq.*fc_map_spd)*.5; <font color="#00CC00">%
FC operates at no more than 50% max power when on</font>
<br>cs_charge_pwr=0;&nbsp; <font color="#00CC00">% FC output power, when
on, is independent of SOC</font>
<br>cs_min_off_time=inf; <font color="#00CC00">% FC never restarts before
SOC falls below cs_lo_soc</font>
<br>cs_max_pwr_rise_rate=0; <font color="#00CC00">% FC output power doesn't
increase while on</font>
<br>cs_max_pwr_fall_rate=0; <font color="#00CC00">% FC output power doesn't
decrease while on</font>
<br>&nbsp;
<p>
<hr WIDTH="100%">
<br><sup><font size=-2>1</font></sup><font size=-1>It is possible to use
it, however, to control other types of fuel converters such as fuel cells.&nbsp;
The fuel cell vehicle model included with ADVISOR 2.0 gives an example
of this workaround.</font>
<br>
<hr SIZE=5 NOSHADE WIDTH="100%">
<center><a href="advisor_ch3.htm">Back to Chapter 3</a></center>

</body>
</html>
